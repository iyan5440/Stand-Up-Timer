(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&"SCRIPT"===n.currentScript.tagName.toUpperCase()&&(t=n.currentScript.src),!t)){var r=n.getElementsByTagName("script");if(r.length)for(var a=r.length-1;a>-1&&(!t||!/^http(s?):/.test(t));)t=r[a--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t=e.p+"ebbc126a4ae1055a035456c84a11bec3.mp3";var n,r=!1,a=!1,o=!1,i=3e3;function c(e,t){var a=e;s(t,e),n=setInterval((function(){a-=1e3,console.log(a),"Study Time"===t?0==a?(l(),s("Break Time",0)):a<=-1e3?(clearInterval(n),r=!1,c(3e3,"Break Time")):s("Study Time",a):"Break Time"===t&&(0==a?(l(),s("Study Time",0)):a<=-1e3?(clearInterval(n),r=!1,o&&c(i,"Study Time")):s("Break Time",a))}),1e3)}function s(e,t){console.log("Sending ".concat(e," update: ").concat(u(t))),chrome.runtime.sendMessage({event:"timerUpdate",time:u(t),type:e})}function l(){chrome.runtime.sendMessage({event:"play",sfx:t})}function u(e){var t=String(Math.floor(e/36e5%24)).padStart(2,"0"),n=String(Math.floor(e/6e4%60)).padStart(2,"0"),r=String(Math.floor(e/1e3%60)).padStart(2,"0");return"".concat(t,":").concat(n,":").concat(r)}chrome.runtime.onInstalled.addListener((function(){console.log("just installed"),chrome.storage.local.set({defaultData:{timer:3e3}},(function(){console.log("Data has been Initalized")}))})),chrome.runtime.onMessage.addListener((function(e,t,n){if("default"===e.event){return function e(){chrome.storage.local.get("defaultData",(function(t){t.defaultData?n(t.defaultData.timer):setTimeout(e,500)}))}(),!0}})),chrome.runtime.onMessage.addListener((function(e,t,l){if("start"===e.event){if(r||a)return;0==r&&(r=!0,clearInterval(n),c(i,"Study Time"))}else if("stop"===e.event)clearInterval(n),r=!1,a=!1,s("Study Time",i);else if("loop"===e.event)o=!o,console.log("Loop is "+o);else if("getState"===e.event)return l({isOnClick:r,isOnBreakClick:a,countDate:i,countBreakDate:3e3,isLoop:o}),!0}))})();